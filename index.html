<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- style tailwind css ver.3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.12.313/build/pdf.min.js"></script>

    <title>Tokiwa Scholar</title>
</head>
<body class="bg-purple-50">
    <!-- under 768px -->
    <div class="md:hidden w-screen h-screen flex flex-col justify-center items-center">
        <header class="fixed top-0 bg-purple-600 w-full flex flex-col items-center justify-between p-2 text-white">
            <h1 class="text-3xl font-black">Tokiwa Scholar</h1>
            <div>
                <a href="https://www.tokiwa.ac.jp/~tokikou/" target="_blank" rel="noopener noreferrer" class="hover:underline">常磐大学高等学校ホームページ</a>
            </div>
        </header>
        <p class="text-purple-600">
            申し訳ありません。このサイズの画面には対応しておりません。
        </p>
    </div>
    
    <!-- over 768px -->
    <div class="hidden md:block w-screen h-screen">
        <header class="bg-purple-600 w-full flex items-center justify-between h-12 px-2 text-white">
            <h1 class="text-3xl font-black flex">
                <span class="ml-2">
                    Tokiwa Scholar 論文
                    <span class="text-sm font-normal">-先輩の論文を検索しよう-</span>
                </span>
            </h1>
            <div class="grid grid-cols-3 gap4">
                <a href="https://www.tokiwa.ac.jp/~tokikou/" class="hover:underline flex justify-center items-center" target="_blank" rel="noopener noreferrer">
                    <span><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="none"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"/></svg></span>
                    常磐大学高等学校
                </a>
            </div>
        </header>
        <main class="w-full grid grid-cols-3" style="height: calc(100vh - 5rem);">
            <!-- side bar container -->
            <div class="py-1 overflow-hidden">
                <div class="border-r border-purple-300 h-full overflow-y-scroll p-4 pb-0">
                    <h2 class="text-2xl font-bold border-b-2 border-purple-300">検索</h2>
                    <div class="mt-4 mb-16 grid grid-cols-4 lg:grid-cols-5 shadow-md">
                        <input 
                            id="search-word"
                            type="search"
                            placeholder="例:スクミリンゴガイ"
                            class="col-span-3 lg:col-span-4 rounded-l-md focus:outline-none focus:ring focus:border-purple-300 w-full h-10 px-2"
                        >
                        <button 
                            id="search-btn"
                            class="bg-yellow-400 hover:bg-yellow-300 rounded-r-md disabled:opacity-50"
                            onclick="HandleWordSearch()"
                        >検索</button>
                    </div>

                    <h2 class="text-2xl font-bold border-b-2 border-purple-300">カテゴリー</h2>
                    <div class="mt-4">
                        <div id="category-list" class="h-full">
                            <div class="flex justify-center items-center animate-pulse">
                                <img src="src/refresh.svg" class="animate-spin w-8">
                                ロード中
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- search result container -->
            <div class="col-span-2 py-4 overflow-hidden">
                <!-- before search -->
                <div id="before-search" class="w-full h-full flex flex-col justify-center items-center text-purple-800">
                    <div class="w-96 text-center">
                        <img src="./src/before_search.png">
                        <p class="text-left">
                            先輩方の論文を探すことができます。左の検索ボックスか、カテゴリーから探してみてください。
                        </p>
                    </div>
                </div>
                <!-- searching -->
                <div id="searching" class="hidden w-full h-full flex flex-col justify-center items-center text-purple-800">
                    <div class="w-96 text-center">
                        <img src="./src/searching.png">
                        <p class="flex justify-center items-center">
                            <span>
                                <svg class="animate-spin fill-current" xmlns="http://www.w3.org/2000/svg" height="36px" viewBox="0 0 24 24" width="36px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M17.65 6.35c-1.63-1.63-3.94-2.57-6.48-2.31-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20c3.19 0 5.93-1.87 7.21-4.56.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53-1.13 2.43-3.84 3.97-6.8 3.31-2.22-.49-4.01-2.3-4.48-4.52C5.31 9.44 8.26 6 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z"/></svg>
                            </span>
                            ただ今、検索しています。
                        </p>
                    </div>
                </div>
                
                <!-- search fail -->
                <div id="search-fail" class="hidden w-full h-full flex flex-col justify-center items-center text-purple-800">
                    <div class="w-96 text-center">
                        <img src="./src/search_fail.png">
                        <p class="flex justify-center items-center">
                            「<span class="show-search-word"></span>」に該当する論文は見つかりませんでした。
                        </p>
                    </div>
                </div>

                <!-- search result -->
                <div id="search-result" class="hidden w-full h-full overflow-y-scroll p-4">
                    <h2 class="text-2xl font-black text-purple-800 mb-8">「<span class="show-search-word"></span>」の検索結果</h2>
                    <ul id="paper-list">
                        
                    </ul>
                </div>
            </div>
        </main>
        <footer class="bg-purple-600 w-full flex items-center justify-center h-8 px-2 text-white">
            <p>&copy; 2024 常磐大学高等学校 研究開発部</p>
        </footer>
    </div>

    <script src="./js/utils.js"></script>
    <script src="./js/search.js"></script>
    <script src="./js/category.js"></script>
    <script>
        window.addEventListener("load", async function () {
            const ctgry = await getCategories();
            updateCategory(ctgry);
        })
    </script>
</body>
</html>
